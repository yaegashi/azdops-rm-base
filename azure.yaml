# yaml-language-server: $schema=https://raw.githubusercontent.com/Azure/azure-dev/main/schemas/v1.0/azure.yaml.json

name: dx2devops-rm-azdshared
hooks:
  postprovision:
    shell: sh
    run: |
      sed -i '/^# BEGIN STATE/,/^# END STATE/d' azure.yaml
      cat <<EOF >>azure.yaml
      # BEGIN STATE
      # DO NOT EDIT - generated by the postprovision hook
      state:
        remote:
          backend: AzureBlobStorage
          config:
            accountName: ${AZURE_STORAGE_ACCOUNT_NAME}
      # END STATE
      EOF
# BEGIN STATE
# END STATE
